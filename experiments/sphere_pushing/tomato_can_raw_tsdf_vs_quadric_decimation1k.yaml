# Unique identifier for this experiment for logging
experiment_id: "quadric_decimation_1k"

outer_env:
  contact_model: "hydroelastic_with_fallback"
  solver: "sap"
  obj_name: "ycb_tomato_soup_can"

inner_env:
  contact_model: "hydroelastic_with_fallback"
  solver: "sap"
  obj_name: "ycb_tomato_soup_can"

script:
  name: "sphere_pushing"
  args:
    sim_duration: 1.0
    timestep: 0.001
    logging_frequency_hz: 1000
    manipuland_directive: "../../models/manipulands/tomato_can_manipuland_directive.yaml"
    manipuland_base_link_name: "ycb_tomato_soup_can_base_link"
    manipuland_default_pose: [0.0, 0.0, 0.0, 0.0, 0.0, 0.07]
    save_raw_mesh: false
    hydroelastic_manipuland: true # No effect if 'contact_model' is 'point'
    sphere_starting_position: [0.2, 0.0, 0.07]
    sphere_pid_gains:
      kp: 100.0
      ki: 1.0
      kd: 20.0
    sphere_radius: 0.02
    is_pipeline_comparison: True

# Component specifications
# 'args' are constructor arguments that are not part of the base class constructors
logger:
  class: "SpherePushingLogger"
  args:
    label_to_mask: -1 # NOTE: Does not correspond to anything
    manipuland_name: "ycb_tomato_soup_can"
    manipuland_base_link_name: "ycb_tomato_soup_can_base_link"
    kProximity: false
    sphere_name: "sphere"

outer_image_generator:
  class: "NoneImageGenerator"
  args:

inner_image_generator:
  class: "NoneImageGenerator"
  args:

outer_inverse_graphics:
  class: "IdentityInverseGraphics"
  args:
    mesh_path: ./data/ycb_tomato_soup_can/tomato_soup_can_tsdf.obj
    mesh_pose: [0.0, 0.0, 0.0, 0.0, 0.0, 0.07]

inner_inverse_graphics:
  class: "IdentityInverseGraphics"
  args:
    mesh_path: ./data/ycb_tomato_soup_can/tomato_soup_can_tsdf.obj
    mesh_pose: [0.0, 0.0, 0.0, 0.0, 0.0, 0.07]

outer_mesh_processor:
  class: "IdentityMeshProcessor"
  args:

inner_mesh_processor:
  class: "QuadricDecimationMeshProcessor"
  args:
    target_triangle_num: 1000

outer_physical_property_estimator:
  class: "GTPhysicalPropertyEstimator"
  args:
    mass: 0.348
    inertia: [
      [4.0049e-04, 2.8689e-06, -2.7256e-06],
      [2.8689e-06, 3.9849e-04, -1.0914e-05],
      [-2.7256e-06, -1.0914e-05, 2.1282e-04]
    ]
    center_of_mass: [-0.0032, 0.0062, -0.0124]

inner_physical_property_estimator:
  class: "GTPhysicalPropertyEstimator"
  args:
    mass: 0.348
    inertia: [
      [4.0049e-04, 2.8689e-06, -2.7256e-06],
      [2.8689e-06, 3.9849e-04, -1.0914e-05],
      [-2.7256e-06, -1.0914e-05, 2.1282e-04]
    ]
    center_of_mass: [-0.0032, 0.0062, -0.0124]

simulator:
  class: "SpherePushingSimulator"
  args:
    settling_time: 0.2
    manipuland_name: ycb_tomato_soup_can
    controll_period: 0.01
    closed_loop_control: false
    num_meters_to_move_in_manpuland_direction: 0.6
 